(this["webpackJsonpinteractive-ui-signal"]=this["webpackJsonpinteractive-ui-signal"]||[]).push([[0],{130:function(e,t,c){},131:function(e,t,c){},159:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),i=c(31),r=c.n(i),s=(c(130),c(47)),o=(c(131),c(181)),u=c(85),l=c.n(u),j=c(104),d=c(185),b=c(179),h=c(182),O=c(172),x=c(173),p=c(174),f=c(175),m=c(58),g=c(78),v=c(4),w=c(115),C=c(40),k=c(169),A=c(184),S=c(170),y=c(3),_=function(e){var t=e.label,c=(e.size,Object(w.a)(e,["label","size"])),n=Object(m.c)(c),a=Object(v.a)(n,2),i=a[0],r=a[1].error;return Object(y.jsxs)(C.a,{isInvalid:!!r,children:[Object(y.jsx)(k.a,{htmlFor:i.name,children:t}),Object(y.jsx)(A.a,Object(g.a)(Object(g.a)(Object(g.a)({},i),c),{},{id:i.name,placeholder:c.placeholder})),r?Object(y.jsx)(S.a,{children:r}):null]})},T=c(37),F=c(39),I=c.n(F),z=function(e){Object(s.a)(e);var t=Object(d.a)(),c=t.isOpen,n=t.onOpen,a=t.onClose,i=Object(T.b)();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(b.a,{isOpen:c,onClose:a,children:[Object(y.jsx)(b.g,{}),Object(y.jsxs)(b.d,{children:[Object(y.jsx)(b.f,{children:"Create your account"}),Object(y.jsx)(b.c,{}),Object(y.jsx)(m.b,{initialValues:{account:""},onSubmit:function(){var e=Object(j.a)(l.a.mark((function e(t,c){var n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.setSubmitting,n=c.setErrors,""!==t.account){e.next=4;break}return n({account:"Account is required"}),e.abrupt("return");case 4:return r={name:t.account},e.prev=5,e.next=8,I.a.post("http://localhost:8080/api/accounts",r);case 8:200===(s=e.sent).status?setTimeout((function(){i.emit("fetchAccounts",void 0)}),500):n({account:s.statusText}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),n({account:e.t0.message});case 15:return e.abrupt("return",a());case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,c){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(y.jsxs)(m.a,{children:[Object(y.jsx)(b.b,{pb:6,children:Object(y.jsx)(_,{name:"account",placeholder:"account",label:"Account name"})}),Object(y.jsxs)(b.e,{children:[Object(y.jsx)(h.a,{mr:2,colorScheme:"teal",isLoading:t,type:"submit",children:"Save"}),Object(y.jsx)(h.a,{onClick:a,children:"Cancel"})]})]})}})]})]}),Object(y.jsxs)(O.a,{p:"2",color:"white",bgColor:"teal",children:[Object(y.jsx)(x.a,{p:"2",children:Object(y.jsx)(p.a,{size:"md",children:"Interactive UI signal - web client"})}),Object(y.jsx)(f.a,{}),Object(y.jsx)(x.a,{children:Object(y.jsx)(h.a,{colorScheme:"teal",onClick:n,children:"New account"})})]})]})},E=c(17),L=c(176),P=c(177),B=c(186),D=c(180),J=c(110),M=function(e){var t=e.account,c="trial"===e.plan?"premium":"trial",n=Object(D.a)(),a=Object(T.b)();return Object(y.jsxs)(J.a,{size:"sm",isAttached:!0,variant:"outline",children:[Object(y.jsxs)(h.a,{mr:"-px",onClick:function(){I.a.post("http://localhost:8080/api/account/upgrade",{account:t.execution.workflow_id,actor:t.execution.workflow_id,to:c}).then((function(e){200===e.status&&(e.data.error?n({title:"Account upgrade failed.",description:e.data.error,status:"error",duration:5e3,isClosable:!0}):(setTimeout((function(){a.emit("fetchAccounts",void 0)}),1e3),n({title:"Account changed.",description:"Account successfully changed to ".concat(c,"."),status:"success",duration:3e3,isClosable:!0})))})).catch((function(e){n({title:"Account upgrade failed.",description:e.message,status:"error",duration:5e3,isClosable:!0})}))},children:["Move to ",c]}),Object(y.jsx)(h.a,{mr:"-px",colorScheme:"red",onClick:function(){I.a.post("http://localhost:8080/api/account/delete",{account:t.execution.workflow_id,actor:t.execution.workflow_id}).then((function(e){200===e.status&&(e.data.error?n({title:"Account upgrade failed.",description:e.data.error,status:"error",duration:5e3,isClosable:!0}):(setTimeout((function(){a.emit("fetchAccounts",void 0)}),1e3),n({title:"Account deleted.",description:"Account successfully deleted.",status:"success",duration:3e3,isClosable:!0})))})).catch((function(e){n({title:"Account deletion failed.",description:e.message,status:"error",duration:5e3,isClosable:!0})}))},children:"Delete"})]})},N=function(e){Object(s.a)(e);var t=Object(n.useState)([]),c=Object(v.a)(t,2),a=c[0],i=c[1],r=Object(n.useState)(void 0),o=Object(v.a)(r,2),u=o[0],l=o[1],j=function(){I.a.get("http://localhost:8080/api/accounts").then((function(e){if(e.data){var t=[];e.data.executions&&(e.data.executions.forEach((function(e){e.plan="loading",I.a.get("http://localhost:8080/api/plan?account="+e.execution.workflow_id).then((function(t){var c,n;200===t.status&&(c=e.execution.workflow_id,n=t.data.plan,i((function(e){var t=e.filter((function(e){return e.execution.workflow_id===c&&e.plan!==n}));return t.length>0?(t[0].plan=n,Object(E.a)(e)):e})))}))})),t.push.apply(t,Object(E.a)(e.data.executions))),i(t),l(void 0)}})).catch((function(e){l(e.message)}))};return Object(n.useEffect)(j,[]),Object(T.c)("fetchAccounts",j),"undefined"===typeof u?Object(y.jsxs)(L.a,{variant:"simple",children:[Object(y.jsx)(L.b,{children:"System accounts"}),Object(y.jsx)(L.f,{children:Object(y.jsxs)(L.g,{children:[Object(y.jsx)(L.e,{children:"Name"}),Object(y.jsx)(L.e,{children:"Type"}),Object(y.jsx)(L.e,{children:"Actions"})]})}),Object(y.jsx)(L.c,{children:a.map((function(e){return Object(y.jsxs)(L.g,{children:[Object(y.jsx)(L.d,{children:e.execution.workflow_id}),Object(y.jsx)(L.d,{children:e.plan}),Object(y.jsx)(L.d,{children:Object(y.jsx)(M,{account:e,plan:e.plan})})]},e.execution.run_id)}))})]}):Object(y.jsx)(P.a,{children:Object(y.jsx)(x.a,{mt:16,children:Object(y.jsxs)(B.a,{status:"error",children:[Object(y.jsx)(B.c,{}),Object(y.jsx)(B.d,{mr:2,children:"API error"}),Object(y.jsx)(B.b,{children:u})]})})})},q=function(e){return Object(s.a)(e),Object(y.jsx)(o.a,{children:Object(y.jsxs)(T.a,{children:[Object(y.jsx)(z,{}),Object(y.jsx)(N,{})]})})},U=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,187)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),i(e),r(e)}))};r.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(q,{})}),document.getElementById("root")),U()}},[[159,1,2]]]);
//# sourceMappingURL=main.c45d8c27.chunk.js.map